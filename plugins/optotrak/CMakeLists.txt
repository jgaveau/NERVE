cmake_minimum_required(VERSION 2.8)
set(PLUGIN_FILENAME Optotrak)

PROJECT(${PLUGIN_FILENAME})

set(SRCFILES
	${PLUGIN_FILENAME}.cpp
	${PLUGIN_FILENAME}.ui
	IOptotrak.cpp
	)
set(HDRFILES
	GuiHeader.h
	IOptotrak.h
	OptotrakWrapper.h
	)
set(FILES_TO_UIC
	${PLUGIN_FILENAME}.ui
	)
set(FILES_TO_MOC
	GuiHeader.h
	)


link_directories($ENV{NERVE_LIB_DIR})
include_directories(../../include)
include_directories(C:/NDIoapi/ndlib/include)

find_package(Qt4 REQUIRED)
include(${QT_USE_FILE})
qt4_wrap_ui(UI_HDRFILES ${FILES_TO_UIC})
qt4_wrap_cpp(MOC_SRCFILES ${FILES_TO_MOC})
list(APPEND SRCFILES ${MOC_SRCFILES})
include_directories(${CMAKE_BINARY_DIR}) #needed so files generated by uic and moc can be found

find_package(OpenSceneGraph 2.8.2 REQUIRED OpenThreads)
include_directories(${OPENSCENEGRAPH_INCLUDE_DIRS})

add_definitions(-DIOPTOTRAK_EXPORT)

add_library(${PLUGIN_FILENAME} SHARED ${SRCFILES} ${HDRFILES})
target_link_libraries(${PLUGIN_FILENAME} NerveApp ${QT_LIBRARIES} 
							C:/NDIoapi/ndlib/msvc/oapi.lib
							${OPENSCENEGRAPH_LIBRARIES})