cmake_minimum_required(VERSION 2.8)
set(PLUGIN_FILENAME centerout_example)

PROJECT(${PLUGIN_FILENAME})

set(SRCFILES
	${PLUGIN_FILENAME}.cpp
	${PLUGIN_FILENAME}.ui
	GuiImpl.cpp
	CenterOut.cpp
	../../src/nrvApp/RebroadcastManager.cpp
	../../src/nrvApp/Rebroadcast.cpp
	)
set(HDRFILES
	plugin.h
	GuiHeader.h
	SceneElements.h
	Centerout.h
	)
set(FILES_TO_UIC
	${PLUGIN_FILENAME}.ui
	)
set(FILES_TO_MOC
	GuiHeader.h
	../../include/nrvToolbox/RebroadcastQtAdapter.h
	)


link_directories($ENV{NERVE_LIB_DIR})
include_directories(../../include)
include_directories(../)

find_package(Qt4 REQUIRED)
include(${QT_USE_FILE})
qt4_wrap_ui(UI_HDRFILES ${FILES_TO_UIC})
qt4_wrap_cpp(MOC_SRCFILES ${FILES_TO_MOC})
list(APPEND SRCFILES ${MOC_SRCFILES})
include_directories(${CMAKE_BINARY_DIR}) #needed so files generated by uic and moc can be found

find_package(OpenSceneGraph 2.8.2 REQUIRED osg)
include_directories(${OPENSCENEGRAPH_INCLUDE_DIRS})

add_library(${PLUGIN_FILENAME} SHARED ${SRCFILES} ${HDRFILES})
target_link_libraries(${PLUGIN_FILENAME} NerveApp ${QT_LIBRARIES} 
						${OPENSCENEGRAPH_LIBRARIES} 
						../../../NerveProjects/plugins/osgwindow/release/osgwindow
						../../../NerveProjects/plugins/FileWriter/release/FileWriter
						../../../NerveProjects/plugins/optotrak/release/optotrak
						)